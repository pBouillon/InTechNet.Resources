<!-- Resource 1 -->
<!-- Title -->
<h5 class="text-center mb-2">
    Le <span class="text-success">phishing</span> c'est quoi ?
</h5>
<!-- /Title -->

<!-- Explanation -->
<div class="row">

    <h6 class="col-md-8 mx-auto mt-3">
       Le phishing: <span class="text-success">la pÃªche aux donnÃ©es</span> ğŸ£
    </h6>

    <div class="row">

        <div class="col-md-8 mx-auto">
    
            <p class="text-justify mt-3">
                Le phishing ou <em>hameÃ§onnage</em> en franÃ§ais est une arnaque courante sur internet
                dans laquelle beaucoup de gens tombe ! Le but est trÃ¨s simple: te voler l'accÃ¨s 
                Ã  un de tes comptes. Cela peut Ãªtre n'importe quel type de compte: banque, sÃ©curitÃ© sociale,
                impÃ´ts pour les adultes, mais Ã©galement ton compte Snapchat, Fornite, etc. En bref,
                n'importe lequel de tes comptes peut Ãªtre viser !
            </p>
    
            <p class="text-justify mt-3">
                Mais alors comment les gens s'y prennent-ils pour te voler ton compte? 
                Tu as pourtant choisi un mot de passe trÃ¨s fort, que personne ne peut deviner.
                Et bien c'est trÃ¨s simple: tu leur donnes sans le vouloir !
            </p>

            <p class="text-justify mt-3">
                En effet, le phishing est une arnaque trÃ¨s simple. Tu vas recevoir un e-mail qui te dit:
                <div class="border"><em><br><p class="text-center mt-2">ğŸš¨ <span class="text-danger">Attention !</span> ğŸš¨</p><br>
                Une activitÃ© inattendue a Ã©tÃ© dÃ©tectÃ© sur ton compte. Pour s'assurer qu'il s'agit bien de toi,
                connecte-toi sur le lien suivant:
                le lien de l'arnaque.com</em></div>
            </p>

            <p class="text-justify mt-3">
                Une fois que tu as cliquÃ© sur le lien, le faux site va te demander de te connecter.
                Si tu rentres ton identifiant et ton mot de passe, fÃ©licitations !
                Tu viens de donner ton compte Ã  quelqu'un de malintentionnÃ© ğŸ <br>
                Il pourra maintenant se connecter sur ton compte et changer ton super mot de passe.
            </p>

            <blockquote class="blockquote text-center my-5">
                <p class="mb-0">Je ne donne mon mot de passe Ã  personne, je ne l'Ã©cris que pour me connecter ğŸ¤“</p>
                <footer class="blockquote-footer">Quelqu'un qui va perdre son compte un jour</footer>
            </blockquote>

            <p class="text-justify mt-3">
                Heureusement, pas d'inquiÃ©tudes: repÃ©rer les tentatives de phishing est trÃ¨s simple et nous allons
                voir comment faire !
            </p>
            
        </div>
    
    </div>

</div>

<!-- /Explanation-->

<!-- Module button -->
<div class="row">

    <div class="col-md-3 mx-auto mt-3">

        <button id="btn-next" class="btn btn-success">C'est parti ! ğŸ’ª</button>

    </div>

</div>
<!-- /Module button -->

<!-- Logic -->
<script>
    $(document).ready(() => {

        // Fetch the ID of the hub from URI
        // https://<host>/hubs/<id>/...
        // [https:][][<host>][hubs][<id>][...]
        const hubId = location.href.split("/")[4];

        // Constants for API calls
        const apiUrl = "http://localhost:8080/api/v1";
        const nextResourceUrl = apiUrl + "/Pupils/me/Hubs/" + hubId + "/Modules/current/Resources/current";
        const validateResourceUrl = apiUrl + "/Pupils/me/Hubs/" + hubId + "/Modules/current/States/current";

        // Retrieve the token from the local storage
        const token = JSON.parse(localStorage.currentPupil).token;

        /**
         * @summary loads the next resource from this one and load it into the
         *          current page
         */
        function loadNextResource() {
            const xmlHttp = new XMLHttpRequest();
            xmlHttp.open("GET", nextResourceUrl, false);
            xmlHttp.setRequestHeader("Authorization", "Bearer " + token);
            xmlHttp.send(null);

            const resource = JSON.parse(xmlHttp.responseText);
            document.getElementById("resource-content").innerHTML = resource.content;
        }

        /**
         * @summary validate the current resource
         */ 
        function validateResource() {
            const xmlHttp = new XMLHttpRequest();
            xmlHttp.open("PUT", validateResourceUrl, false);
            xmlHttp.setRequestHeader("Authorization", "Bearer " + token);
            xmlHttp.send(null);
        }

        // Event listener for the button to go to the next resource
        $("#btn-next").click(() => {
            validateResource();
            loadNextResource();
        });

    });
</script>
<!-- /Logic -->