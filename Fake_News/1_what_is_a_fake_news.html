<!-- Title -->
<h5 class="text-center mb-2">
    Pour commencer, <span class="text-success">c'est quoi exactement une fake news</span class> ?
</h5>
<!-- /Title -->

<!-- Fake news presentation -->
<div class="row">

    <div class="col-md-8 mx-auto">

        <p class="text-justify mt-3">
            Les fake-news (aussi appelÃ©es <em>contre-vÃ©ritÃ©s</em> ou <em>infox</em>) sont <mark>des informations
            mensongÃ¨res propagÃ©es dans le but de tromper</mark> ceux qui la lisent. Elles font partie de ce qu'on
            appelle <mark>la dÃ©sinformation</mark>, un bien grand mot pour dire l'action de faire passer des mensonges
            pour la rÃ©alitÃ© auprÃ¨s d'une ou de plusieurs personnes.
        </p>

        <p class="text-justify mt-3">
            En gÃ©nÃ©ral, personne ne fait quelque chose sans but, et les fake news n'Ã©chappent par Ã  la rÃ¨gle: elles sont
            souvent <mark>Ã©crites dans un but prÃ©cis</mark>. Voici quelques exemples :
        </p>

        <ul class="list-unstyled mt-3">
            <li class="pl-3 mb-2">
                <span class="lead">ğŸ“£ Faire le buzz</span>: beaucoup de sites utilisent de la publicitÃ©: plus il y a
                de personnes qui le visitent, plus ils gagnent d'argent
            </li>
            <li class="pl-3 mb-2">
                <span class="lead">ğŸ˜° Faire peur</span>: pour empÃªcher les gens d'Ãªtre d'accord avec quelqu'un ou une
                idÃ©e il est plus facile de leur faire peur que de les convaincre avec de vrais arguments !
            </li>
            <li class="pl-3 mb-2">
                <span class="lead">ğŸ’° Vendre quelque chose</span>: si quelqu'un ment sur ce qu'il vend alors il peut
                trÃ¨s bien donner des arguments de vente incroyables comme l'invisibilitÃ© ou la vie Ã©ternelle !
            </li>
        </ul>

        <p class="text-justify mt-3">
            Tout Ã§a semble dÃ©lirant non ? S'il est aussi facile de voir que c'est un mensonge, alors comment cela se
            fait-il que des gens puissent y croire ?
        </p>

    </div>

</div>
<!-- /Fake news presentation -->

<!-- Resource validation button -->
<div class="row justify-content-md-start justify-content-center my-5">

    <button id="btn-next" class="col-md-3 col-10 mr-md-0 offset-md-7 btn btn-success">
        Un petit exemple ?
    </button>

</div>
<!-- /Resource validation button -->


<!-- Logic -->
<script>
    $(document).ready(() => {

        // Fetch the ID of the hub from URI
        // https://<host>/hubs/<id>/...
        // [https:][][<host>][hubs][<id>][...]
        const hubId = location.href.split("/")[4];

        // Constants for API calls
        const apiUrl = "http://193.50.40.81:5000/api/v1";
        const nextResourceUrl = apiUrl + "/Pupils/me/Hubs/" + hubId + "/Modules/current/Resources/current";
        const validateResourceUrl = apiUrl + "/Pupils/me/Hubs/" + hubId + "/Modules/current/States/current";

        // Retrieve the token from the local storage
        const token = JSON.parse(localStorage.currentPupil).token;

        /**
         * @summary loads the next resource from this one and load it into the
         *          current page
         */
        function loadNextResource() {
            const xmlHttp = new XMLHttpRequest();
            xmlHttp.open("GET", nextResourceUrl, false);
            xmlHttp.setRequestHeader("Authorization", "Bearer " + token);
            xmlHttp.send(null);

            const resource = JSON.parse(xmlHttp.responseText);
            document.getElementById("resource-content").innerHTML = resource.content;
        }

        /**
         * @summary validate the current resource
         */
        function validateResource() {
            const xmlHttp = new XMLHttpRequest();
            xmlHttp.open("PUT", validateResourceUrl, false);
            xmlHttp.setRequestHeader("Authorization", "Bearer " + token);
            xmlHttp.send(null);
        }

        // Event listener for the button to go to the next resource
        $("#btn-next").click(() => {
            validateResource();
            loadNextResource();
        });

    });
</script>
<!-- /Logic -->
